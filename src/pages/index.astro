---
import RecipeListItem from '../components/RecipeListItem.vue'
// import RecipePreview from '../components/RecipePreview.vue'
import BaseLayout from '../layouts/BaseLayout.astro'
// import { getAllRecipes } from '../data/recipes';
import { getCollection } from 'astro:content'

const allRecipes = await getCollection('recipes')

console.log(allRecipes)

// console.log({ store, state, allRecipes })

// .map(function (recipe: Recipe) {
// 	return { params: { recipe }};
// });

// console.log(allRecipes)

// allRecipes = allRecipes.sort((a, b) => new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf());

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/
---

<BaseLayout title="All recipes">
  <section
    class="py-4 px-4 mx-6 mb-4 background-slate-100 bg-gradient-to-r from-indigo-500 to-pink-600 rounded-lg shadow grain"
  >
    <h1 class="font-display font-bold text-6xl text-white leading-none">
      Recipes
    </h1>
  </section>

  <section class="mx-6 grid grid-cols-4 gap-4">
    {
      allRecipes.map(
        (entry) =>
           (
            <li>
              <RecipeListItem recipe={entry} client:idle />
            </li>
          )
      )
    }
  </section>
</BaseLayout>

<style>
  .grain {
    /* filter: contrast(170%) brightness(1000%); */
    /* background: linear-gradient(0deg, rgba(0, 0, 255, 1), rgb(78, 11, 11)); */
    mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 250 250' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"),
      linear-gradient(30deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
    /* mask-mode: luminance; */
  }
</style>
